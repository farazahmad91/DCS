@model API.DBContext.Entities.RegisterViewModel
@{
    ViewData["Title"] = "Register";
    Layout = "~/Views/Shared/_Account.cshtml";
}

<div class="container">
    <div class="login-box rounded-2 p-5">
            <h5 class="my-5">Create an Account.</h5>
            <form id="registerForm" method="post" action="/Account/Register">
                <div class="mb-3">
                    <label class="form-label">Name</label>
                    <input type="text" id="Name" name="Name" class="form-control" placeholder="Enter your name" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" id="Email" name="Email" class="form-control" placeholder="Enter your email" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Phone No</label>
                    <input type="tel" id="PhoneNo" name="PhoneNo" class="form-control" placeholder="Enter your Phone No" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <select class="form-control" id="Role" name="Role" required>
                        <option value="">:: Select Role ::</option>
                        <option value="Admin">Admin</option>
                        <option value="User">User</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" id="Password" name="Password" class="form-control" placeholder="Enter your password" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" id="ConfirmPassword" name="ConfirmPassword" class="form-control" placeholder="Confirm your password" required>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" value="" id="agreeTerms" required>
                    <label class="form-check-label" for="agreeTerms">I agree to the terms and conditions</label>
                </div>
                <div class="d-grid py-3">
                    <button type="submit" class="btn btn-lg btn-primary">
                        Sign up
                    </button>
                </div>
            </form>
            <div class="text-center py-3">or Signup with</div>
            <div class="d-flex gap-2 justify-content-center">
                <button type="button" class="btn btn-outline-light">
                    <img src="assets/images/google.svg" class="login-icon" alt="Login with Google" />
                </button>
                <button type="button" class="btn btn-outline-light">
                    <img src="assets/images/facebook.svg" class="login-icon" alt="Login with Facebook" />
                </button>
            </div>
            <div class="text-center pt-3">
                <span>Already have an account?</span>
                <a href="login.html" class="text-blue text-decoration-underline ms-2">Login here</a>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#togglePassword").click(function () {
            var passwordInput = $("#Password");
            var type = passwordInput.attr("type") === "password" ? "text" : "password";
            passwordInput.attr("type", type);
            $(this).toggleClass("fa-eye fa-eye-slash");
        });
    });

    $(function () {
        $("#registerForm").submit(function (e) {
            e.preventDefault();
            if (validateUser()) {
                var formData = $(this).serialize();
                $.post("/Account/Register", formData)
                    .done(function (res) {
                        showinsertsuccess("Register Successful");
                        if (res == 1) {
                            window.location.href = "/Account/Login";
                        }
                    })
                    .fail(function () {
                        showerrors("Something went wrong!!");
                    });
            }
        });
    });

    function validateUser() {
        // Validation logic here
        return true; // Return true if validation passes, false otherwise
    }

    function showinsertsuccess(msg) {
        var x = document.getElementById("snackbar");
        x.className = "show";
        setTimeout(function () { x.className = x.className.replace("show", ""); }, 4000);
        $("#snackbar").html(msg);
    }

    function showupdatesuccess(msg) {
        var x = document.getElementById("snackbar2");
        x.className = "show2";
        setTimeout(function () { x.className = x.className.replace("show2", ""); }, 4000);
        $("#snackbar2").html(msg);
    }

    function showerrors(msg) {
        var x = document.getElementById("snackbar3");
        x.className = "show3";
        setTimeout(function () { x.className = x.className.replace("show3", ""); }, 4000);
        $("#snackbar3").html(msg);
    }
</script>
